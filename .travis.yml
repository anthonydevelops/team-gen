dist: xenial

language: go

go:
  - 1.12.x

services:
  - docker

before_install:
  - curl https://raw.githubusercontent.com/golang/dep/master/install.sh | sh  
  - dep ensure
  - docker pull postgres
  - docker run --name pg --privileged --rm -p 5432:5432 postgres

git:
  depth: 1

install: true

notifications:
  email: false

script:
  - go test -v ./...  # Run all the tests with the race detector enabled